<!DOCTYPE html><html lang="nl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Admin Login - Visclub SiM</title><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="stylesheet" href="admin-style.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>
body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background-color: #f0f2f5;
display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
margin: 0;
color: #333;
}
.login-container {
background-color: #ffffff;
padding: 40px;
border-radius: 12px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 400px;
text-align: center;
}
.login-container h2 {
margin-bottom: 25px;
color: #2c5f7d;
font-size: 28px;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
}
.login-container h2 i {
font-size: 32px;
}
.form-group {
margin-bottom: 20px;
text-align: left;
}
.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 600;
color: #555;
}
.form-group input[type="text"],
.form-group input[type="password"] {
width: calc(100% - 24px);
padding: 12px;
border: 1px solid #e0e0e0;
border-radius: 8px;
font-size: 16px;
transition: border-color 0.3s;
}
.form-group input[type="text"]:focus,
.form-group input[type="password"]:focus {
outline: none;
border-color: #2c5f7d;
box-shadow: 0 0 0 3px rgba(44, 95, 125, 0.2);
}
.btn-login {
width: 100%;
padding: 14px;
background-color: #2c5f7d;
color: white;
border: none;
border-radius: 8px;
font-size: 18px;
font-weight: 700;
cursor: pointer;
transition: background-color 0.3s ease, transform 0.2s ease;
}
.btn-login:hover {
background-color: #1a3a4d;
transform: translateY(-2px);
}
.error-message {
color: #e74c3c;
margin-top: 20px;
font-size: 14px;
display: none;
}
</style>
<!-- Load config first -->
<script src="../config.js"></script>
</head><body><div class="login-container"><h2><i class="fas fa-user-shield"></i> Admin Login</h2><form id="loginForm"><div class="form-group"><label for="username">Gebruikersnaam</label><input type="text" id="username" name="username" required></div><div class="form-group"><label for="password">Wachtwoord</label><input type="password" id="password" name="password" required></div><button type="submit" class="btn-login">Login</button><p id="errorMsg" class="error-message"></p></form></div>
<script>
        // Use global config
        const CONFIG = window.APP_CONFIG || { USE_LOCAL_MODE: false, API_BASE_URL: window.location.origin + '/api' };
        const USE_LOCAL_MODE = CONFIG.USE_LOCAL_MODE;
        const API_URL = CONFIG.API_BASE_URL + '/auth';

        // SECURITY FIX: Hardcoded credentials removed
        // Local mode is now disabled by default in config.js
        // All authentication goes through backend API

        document.getElementById('loginForm').addEventListener('submit', async e => {
            e.preventDefault();
            const user = document.getElementById('username').value.trim();
            const pass = document.getElementById('password').value;

            // SECURITY: Only backend authentication allowed
            if (USE_LOCAL_MODE) {
                console.warn('‚ö†Ô∏è Local mode is enabled but hardcoded credentials are removed for security');
                console.warn('‚ö†Ô∏è Please use backend API authentication');
                document.getElementById('errorMsg').textContent = 'Local mode is disabled for security. Please configure backend API.';
                document.getElementById('errorMsg').style.display = 'block';
                return;
            }

            // Backend API authentication
            try {
                document.getElementById('errorMsg').style.display = 'none';

                const response = await fetch(`${API_URL}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: user, password: pass })
                });

                const data = await response.json();

                if (response.ok && data.token) {
                    console.log('‚úÖ Login successful');

                    // Store auth data
                    localStorage.setItem('visclubsim_token', data.token);
                    localStorage.setItem('visclubsim_admin', JSON.stringify(data.user || { username: user }));

                    // Redirect to dashboard
                    window.location.href = 'index.html';
                } else {
                    document.getElementById('errorMsg').textContent = data.error || 'Ongeldige gebruikersnaam of wachtwoord';
                    document.getElementById('errorMsg').style.display = 'block';
                }
            } catch (error) {
                console.error('‚ùå Login error:', error);
                document.getElementById('errorMsg').textContent = 'Kan geen verbinding maken met de server. Controleer of de backend API draait.';
                document.getElementById('errorMsg').style.display = 'block';
            }
        });

        // Log configuration (no credentials!)
        console.log('üîß Admin Login Configured:', {
            mode: USE_LOCAL_MODE ? 'Local (Disabled)' : 'Backend API',
            apiUrl: API_URL
        });
    </script>
</body></html>