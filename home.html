<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visclub SiM Merksplas - Wedstrijdvissen in Merksplas</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="vijverkaart.css">
    <link rel="stylesheet" href="bot/bot-chat-interface.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-fish"></i>
                <span>Visclub SiM</span>
            </div>
            <ul class="nav-menu">
                <li><a href="home.html" class="nav-link active">Home</a></li>
                <li><a href="kalender.html" class="nav-link">Kalender</a></li>
                <li><a href="klassement.html" class="nav-link">Klassement</a></li>
                <li><a href="inschrijven.html" class="nav-link">Inschrijven</a></li>
                <li><a href="leden.html" class="nav-link">Leden</a></li>
                <li><a href="visvergunning.html" class="nav-link">Visvergunning</a></li>
                <li><a href="weer.html" class="nav-link">Weer</a></li>
                <li><a href="gallerij.html" class="nav-link">Gallerij</a></li>
                <li><a href="route.html" class="nav-link">Route</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Visclub SiM</h1>
            <p class="hero-subtitle">Passie voor hengelsport in Merksplas</p>
            <div class="hero-buttons">
                <a href="inschrijven.html" class="btn btn-primary">Schrijf je in</a>
            </div>
        </div>
        <div class="scroll-indicator">
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <!-- About Section -->
    <section class="about">
        <div class="container">
            <div class="section-header">
                <h2>Welkom bij Visclub SiM</h2>
                <div class="section-line"></div>
                <p>Visclub SiM in Merksplas - Waar gezelligheid en competitie samenkomen</p>
            </div>
            <div class="about-grid">
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
            <h3>71+ Wedstrijden</h3>
                    <p>Jaarlijks organiseren we meer dan 71 wedstrijden inclusief club-, criterium- en vrije wedstrijden</p>
                </div>
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Actieve Gemeenschap</h3>
                    <p>Sluit je aan bij een enthousiaste groep vissers van alle niveaus</p>
                </div>
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3>Competitief & Gezellig</h3>
                    <p>Van criteriums tot BBQ's, we combineren sport met gezelligheid</p>
                </div>
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <h3>Merksplas Viswater</h3>
                    <p>Vis op onze prachtige locatie in Merksplas met diverse vissoorten</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Important Info Section -->
    <section style="padding: 60px 0; background: #f8f9fa;">
        <div class="container">
            <div class="section-header">
                <h2>Belangrijke Informatie</h2>
                <div class="section-line"></div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; max-width: 1000px; margin: 0 auto;">
                <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #2c5f7d;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-user-plus" style="font-size: 24px; color: #2c5f7d;"></i>
                        <h3 style="margin: 0; color: #2c5f7d;">Inschrijving</h3>
                    </div>
                    <p style="margin: 0; color: #666; line-height: 1.6;">Inschrijven kan ter plaatse zolang er plaats is</p>
                </div>

                <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #28a745;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-euro-sign" style="font-size: 24px; color: #28a745;"></i>
                        <h3 style="margin: 0; color: #28a745;">Betaling</h3>
                    </div>
                    <p style="margin: 0; color: #666; line-height: 1.6;">Betaling ter plaatse of vooraf overmaken naar clubrekening</p>
                </div>

                <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #ffc107;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-trophy" style="font-size: 24px; color: #ffc107;"></i>
                        <h3 style="margin: 0; color: #ffc107;">Criterium</h3>
                    </div>
                    <p style="margin: 0; color: #666; line-height: 1.6;">5 wedstrijden, de beste 3 resultaten tellen mee</p>
                </div>

                <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #17a2b8;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-medal" style="font-size: 24px; color: #17a2b8;"></i>
                        <h3 style="margin: 0; color: #17a2b8;">Clubkampioenschap</h3>
                    </div>
                    <p style="margin: 0; color: #666; line-height: 1.6;">Beste 15 van 20 wedstrijden tellen mee voor klassement</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Weather Section -->
    <section id="weer" class="weather-section" style="padding: 60px 0;">
        <div class="container">
            <div class="section-header">
                <h2>Weersvoorspelling Merksplas</h2>
                <div class="section-line"></div>
                <p>Plan je visdag met de actuele weersvoorspelling</p>
            </div>

            <div class="weather-widget">
                <div id="weatherContainer" class="weather-container">
                    <div class="weather-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Weersgegevens laden...</p>
                    </div>
                </div>
            </div>

            <!-- Fishing Weather Tips -->
            <div class="weather-tips" style="margin-top: 40px; background: white; padding: 40px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
                <h3 style="margin-bottom: 24px; color: #2c5f7d;"><i class="fas fa-lightbulb"></i> Vistips op basis van weer</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px;">
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #28a745;">
                        <h4 style="color: #28a745; margin-bottom: 12px;"><i class="fas fa-arrow-down"></i> Lage Luchtdruk</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #666;">Uitstekend voor vissen! Bij lage luchtdruk (< 1010 hPa) zijn vissen actiever en zoeken meer voedsel. Perfect moment om te gaan vissen!</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #ffc107;">
                        <h4 style="color: #ffc107; margin-bottom: 12px;"><i class="fas fa-arrow-up"></i> Hoge Luchtdruk</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #666;">Moeilijker om te vissen. Bij hoge luchtdruk (> 1020 hPa) zijn vissen passiever. Meer geduld nodig voor een beet.</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #17a2b8;">
                        <h4 style="color: #17a2b8; margin-bottom: 12px;"><i class="fas fa-wind"></i> Wind Richting</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #666;">Zuid-west wind is ideaal! Wind duwt aasvisjes naar de windkant waar roofvissen jagen. Zoek de windkant op!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Visclub SiM</h3>
                    <p>Gepassioneerd vissen in Merksplas sinds jaren. Lid worden of meedoen aan onze wedstrijden? Neem contact op!</p>
                    <p><small>Nijverheidsstraat 6, 2330 Merksplas</small></p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="kalender.html">Kalender</a></li>
                        <li><a href="inschrijven.html">Inschrijven</a></li>
                        <li><a href="inschrijvingen.html">Inschrijvingen</a></li>
                        <li><a href="visvergunning.html">Visvergunning</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Volg ons</h3>
                    <div class="social-links">
                        <a href="https://www.facebook.com/visclubsim" target="_blank" title="Volg ons op Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.youtube.com/@visclubsim" target="_blank" title="Bekijk onze YouTube kanaal"><i class="fab fa-youtube"></i></a>
                    </div>
                    <p style="margin-top: 1rem; font-size: 0.9rem;">Blijf op de hoogte van al ons nieuws!</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Visclub SiM Merksplas. Alle rechten voorbehouden.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Plaatsentrekking Sectie (dynamisch geladen) -->
    <div id="homepage-vijverkaart-section"></div>

    <!-- Vis Advies Bot Scripts -->
    <script src="bot/weer-vangst-bot.js"></script>
    <script src="bot/bot-chat-interface.js"></script>
    <script src="vijverkaart.js"></script>

    <script src="script.js"></script>
    <script>
        // Laad gepubliceerde plaatsentrekking
        document.addEventListener('DOMContentLoaded', () => {
            const vijverkaartData = Vijverkaart.laadGepubliceerd();
            const publishedDraw = localStorage.getItem('published_draw');

            if (vijverkaartData || publishedDraw) {
                let dataToShow = null;

                // Prioriteit aan vijverkaart_actueel data
                if (vijverkaartData) {
                    dataToShow = vijverkaartData;
                } else if (publishedDraw) {
                    // Converteer published_draw format naar vijverkaart format
                    try {
                        const drawData = JSON.parse(publishedDraw);
                        const toewijzingen = {};

                        drawData.results.forEach(result => {
                            toewijzingen[result.spot] = {
                                naam: result.name,
                                email: ''
                            };
                        });

                        dataToShow = {
                            toewijzingen: toewijzingen,
                            wedstrijdNaam: drawData.competition.wedstrijdtype || 'Wedstrijd',
                            wedstrijdDatum: drawData.competition.datum,
                            aantalDeelnemers: drawData.results.length,
                            gepubliceerdOp: drawData.publishedAt
                        };
                    } catch (e) {
                        console.error('Fout bij laden published_draw:', e);
                    }
                }

                if (dataToShow) {
                    // Check of niet te oud (max 7 dagen)
                    const gepubliceerd = new Date(dataToShow.gepubliceerdOp);
                    const nu = new Date();
                    const verschilDagen = (nu - gepubliceerd) / (1000 * 60 * 60 * 24);

                    if (verschilDagen <= 7) {
                        // Voeg sectie toe NA de hero sectie
                        const heroSection = document.querySelector('.hero');
                        if (heroSection) {
                            const section = document.getElementById('homepage-vijverkaart-section');
                            section.innerHTML = `
                                <section style="padding: 60px 0; background: #f0f8ff;">
                                    <div class="container">
                                        <div class="section-header">
                                            <h2><i class="fas fa-map-marked-alt"></i> Actuele Plaatsentrekking</h2>
                                            <div class="section-line"></div>
                                            <p><strong>${dataToShow.wedstrijdNaam}</strong> - ${dataToShow.wedstrijdDatum}</p>
                                            <p style="font-size: 14px; color: #666; margin-top: 10px;">
                                                ${dataToShow.aantalDeelnemers} deelnemers • Laatst bijgewerkt: ${new Date(dataToShow.gepubliceerdOp).toLocaleString('nl-NL')}
                                            </p>
                                        </div>
                                        <div id="homepage-vijverkaart" style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto;"></div>
                                    </div>
                                </section>
                            `;

                            // Render vijverkaart
                            const vijverkaart = new Vijverkaart('homepage-vijverkaart', {
                                interactive: false,
                                showHeader: false,
                                showLegend: true
                            });
                            vijverkaart.render(dataToShow.toewijzingen);

                            console.log('✅ Plaatsentrekking getoond op homepage');
                        }
                    } else {
                        console.log('Plaatsentrekking is verlopen (> 7 dagen oud)');
                        localStorage.removeItem('published_draw');
                        Vijverkaart.verwijderGepubliceerd();
                    }
                }
            }
        });
    </script>
</body>
</html>
