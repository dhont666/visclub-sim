html
<!-- Load config first, before any other scripts -->
<script src="config.js"></script>
<!DOCTYPE html><html lang="nl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Instellingen - Visclub SiM Admin</title><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="stylesheet" href="admin-style.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>
.settings-container {
max-width: 900px;
margin: 0 auto;
padding: 20px;
}
.settings-section {
background: white;
border-radius: 12px;
padding: 30px;
margin-bottom: 25px;
box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}
.settings-section h2 {
color: #2c5f7d;
margin-bottom: 10px;
font-size: 20px;
display: flex;
align-items: center;
gap: 10px;
}
.settings-section p {
color: #666;
margin-bottom: 25px;
font-size: 14px;
}
.form-group {
margin-bottom: 20px;
}
.form-group label {
display: block;
margin-bottom: 8px;
color: #333;
font-weight: 500;
font-size: 14px;
}
.form-group input {
width: 100%;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 8px;
font-size: 14px;
transition: border-color 0.3s;
}
.form-group input:focus {
outline: none;
border-color: #2c5f7d;
}
.form-group input:disabled {
background: #f5f5f5;
cursor: not-allowed;
}
.password-strength {
margin-top: 8px;
height: 4px;
background: #e0e0e0;
border-radius: 2px;
overflow: hidden;
}
.password-strength-bar {
height: 100%;
width: 0%;
transition: width 0.3s, background-color 0.3s;
}
.password-strength-bar.weak {
width: 33%;
background: #dc3545;
}
.password-strength-bar.medium {
width: 66%;
background: #ffc107;
}
.password-strength-bar.strong {
width: 100%;
background: #28a745;
}
.password-requirements {
margin-top: 10px;
font-size: 12px;
color: #666;
}
.password-requirements ul {
margin: 5px 0;
padding-left: 20px;
}
.password-requirements li {
margin: 3px 0;
}
.password-requirements li.met {
color: #28a745;
}
.password-requirements li.not-met {
color: #dc3545;
}
.btn-group {
display: flex;
gap: 10px;
margin-top: 20px;
}
.btn-save {
background: #2c5f7d;
color: white;
border: none;
padding: 12px 30px;
border-radius: 8px;
font-size: 14px;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
gap: 8px;
transition: all 0.3s;
}
.btn-save:hover {
background: #1e4558;
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(44, 95, 125, 0.3);
}
.btn-save:disabled {
background: #ccc;
cursor: not-allowed;
transform: none;
}
.btn-cancel {
background: #6c757d;
color: white;
border: none;
padding: 12px 30px;
border-radius: 8px;
font-size: 14px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}
.btn-cancel:hover {
background: #5a6268;
}
.alert {
padding: 15px;
border-radius: 8px;
margin-bottom: 20px;
display: none;
}
.alert.success {
background: #d4edda;
color: #155724;
border: 1px solid #c3e6cb;
}
.alert.error {
background: #f8d7da;
color: #721c24;
border: 1px solid #f5c6cb;
}
.alert.show {
display: block;
}
.info-card {
background: #e8f4f8;
padding: 20px;
border-radius: 8px;
border-left: 4px solid #2c5f7d;
}
.info-card h3 {
color: #2c5f7d;
margin-bottom: 10px;
font-size: 16px;
}
.info-card p {
margin: 0;
color: #666;
font-size: 14px;
line-height: 1.6;
}
.info-row {
display: flex;
justify-content: space-between;
padding: 12px 0;
border-bottom: 1px solid #e0e0e0;
}
.info-row:last-child {
border-bottom: none;
}
.info-label {
color: #666;
font-weight: 500;
}
.info-value {
color: #333;
font-weight: 600;
}
.danger-zone {
background: #fff5f5;
border: 2px solid #dc3545;
border-radius: 12px;
padding: 30px;
margin-top: 30px;
}
.danger-zone h2 {
color: #dc3545;
}
.btn-danger {
background: #dc3545;
color: white;
border: none;
padding: 12px 30px;
border-radius: 8px;
font-size: 14px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}
.btn-danger:hover {
background: #c82333;
}
</style></head><body><header class="admin-header" style="background: #2c5f7d; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center;"><div style="display: flex; align-items: center; gap: 20px;"><a href="index.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 10px;"><i class="fas fa-arrow-left"></i> Terug naar Dashboard
</a><h1 style="margin: 0; font-size: 24px;"><i class="fas fa-cog"></i> Instellingen
</h1></div><div id="adminInfo" style="display: flex; align-items: center; gap: 10px;"><i class="fas fa-user-circle"></i><span id="adminName">Admin</span></div></header><div class="settings-container"><div id="alertSuccess" class="alert success"><i class="fas fa-check-circle"></i><span id="successMessage"></span></div><div id="alertError" class="alert error"><i class="fas fa-exclamation-circle"></i><span id="errorMessage"></span></div><div class="settings-section"><h2><i class="fas fa-user"></i> Account Informatie</h2><p>Bekijk je account details</p><div class="info-card"><div class="info-row"><span class="info-label">Gebruikersnaam:</span><span class="info-value" id="displayUsername">-</span></div><div class="info-row"><span class="info-label">Rol:</span><span class="info-value" id="displayRole">Admin</span></div><div class="info-row"><span class="info-label">Laatste inlog:</span><span class="info-value" id="displayLastLogin">-</span></div><div class="info-row"><span class="info-label">Account aangemaakt:</span><span class="info-value" id="displayCreatedAt">-</span></div></div></div><div class="settings-section"><h2><i class="fas fa-key"></i> Wachtwoord Wijzigen</h2><p>Wijzig je wachtwoord om je account veilig te houden</p><form id="changePasswordForm"><div class="form-group"><label for="currentPassword">Huidig Wachtwoord *</label><input type="password" id="currentPassword" required></div><div class="form-group"><label for="newPassword">Nieuw Wachtwoord *</label><input type="password" id="newPassword" required><div class="password-strength"><div class="password-strength-bar" id="passwordStrengthBar"></div></div><div class="password-requirements"><ul id="passwordRequirements"><li id="req-length" class="not-met">Minimaal 8 karakters</li><li id="req-uppercase" class="not-met">Minimaal 1 hoofdletter</li><li id="req-lowercase" class="not-met">Minimaal 1 kleine letter</li><li id="req-number" class="not-met">Minimaal 1 cijfer</li></ul></div></div><div class="form-group"><label for="confirmPassword">Bevestig Nieuw Wachtwoord *</label><input type="password" id="confirmPassword" required></div><div class="btn-group"><button type="submit" class="btn-save" id="savePasswordBtn"><i class="fas fa-save"></i> Wachtwoord Opslaan
</button><button type="button" class="btn-cancel" onclick="resetPasswordForm()">
Annuleren
</button></div></form></div><div class="danger-zone"><h2><i class="fas fa-exclamation-triangle"></i> Gevaarlijke Zone</h2><p style="color: #666;">Deze acties zijn onomkeerbaar. Wees voorzichtig!</p><div style="margin-top: 20px;"><h3 style="color: #dc3545; font-size: 16px; margin-bottom: 10px;">Alle lokale data wissen</h3><p style="color: #666; font-size: 14px; margin-bottom: 15px;">
Dit verwijdert alle leden, inschrijvingen, resultaten en instellingen uit de browser.
<strong>Deze actie kan niet ongedaan gemaakt worden!</strong></p><button class="btn-danger" onclick="clearAllData()"><i class="fas fa-trash"></i> Wis Alle Data
</button></div></div></div>
<script src="admin-auth.js"></script>
<script src="data-api.js"></script>
<script>
        if (!adminAuth.checkAuth()) {
            window.location.href = 'login.html';
        }
        adminAuth.updateUserDisplay();
        function loadAccountInfo() {
            const user = adminAuth.currentUser;
            if (user) {
                document.getElementById('displayUsername').textContent = user.username;
                document.getElementById('displayRole').textContent = 'Administrator';
                const lastLogin = localStorage.getItem('last_login_time');
                if (lastLogin) {
                    document.getElementById('displayLastLogin').textContent =
                        new Date(lastLogin).toLocaleString('nl-NL');
                }
                document.getElementById('displayCreatedAt').textContent = 'Niet beschikbaar';
            }
        }
        document.getElementById('newPassword').addEventListener('input', function(e) {
            const password = e.target.value;
            let strength = 0;
            const hasLength = password.length >= 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            document.getElementById('req-length').className = hasLength ? 'met' : 'not-met';
            document.getElementById('req-uppercase').className = hasUppercase ? 'met' : 'not-met';
            document.getElementById('req-lowercase').className = hasLowercase ? 'met' : 'not-met';
            document.getElementById('req-number').className = hasNumber ? 'met' : 'not-met';
            if (hasLength) strength++;
            if (hasUppercase) strength++;
            if (hasLowercase) strength++;
            if (hasNumber) strength++;
            const strengthBar = document.getElementById('passwordStrengthBar');
            strengthBar.className = 'password-strength-bar';
            if (strength <= 2) {
                strengthBar.classList.add('weak');
            } else if (strength === 3) {
                strengthBar.classList.add('medium');
            } else if (strength === 4) {
                strengthBar.classList.add('strong');
            }
        });
        document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            if (newPassword !== confirmPassword) {
                showError('Nieuwe wachtwoorden komen niet overeen');
                return;
            }
            const hasLength = newPassword.length >= 8;
            const hasUppercase = /[A-Z]/.test(newPassword);
            const hasLowercase = /[a-z]/.test(newPassword);
            const hasNumber = /[0-9]/.test(newPassword);
            if (!hasLength || !hasUppercase || !hasLowercase || !hasNumber) {
                showError('Wachtwoord voldoet niet aan alle vereisten');
                return;
            }
            let users = JSON.parse(localStorage.getItem('admin_users') || '[]');
            const currentUser = adminAuth.currentUser;
            if (users.length === 0) {
                users = [
                    { username: 'admin', password: 'admin123', name: 'Admin', role: 'admin' },
                    { username: 'visclub', password: 'visclub2026', name: 'Visclub', role: 'admin' },
                    { username: 'kevin.dhont', password: 'visclub2026', name: 'Kevin Dhont', role: 'admin' },
                    { username: 'maarten.borghs', password: 'visclub2026', name: 'Maarten Borghs', role: 'admin' },
                    { username: 'kevin.vandun', password: 'visclub2026', name: 'Kevin Van Dun', role: 'admin' }
                ];
                localStorage.setItem('admin_users', JSON.stringify(users));
            }
            const user = users.find(u => u.username === currentUser.username);
            if (!user || user.password !== currentPassword) {
                showError('Huidig wachtwoord is onjuist');
                return;
            }
            user.password = newPassword;
            localStorage.setItem('admin_users', JSON.stringify(users));
            showSuccess('Wachtwoord succesvol gewijzigd!');
            resetPasswordForm();
        });
        function resetPasswordForm() {
            document.getElementById('changePasswordForm').reset();
            document.getElementById('passwordStrengthBar').className = 'password-strength-bar';
            document.querySelectorAll('#passwordRequirements li').forEach(li => {
                li.className = 'not-met';
            });
        }
        function showSuccess(message) {
            const alert = document.getElementById('alertSuccess');
            document.getElementById('successMessage').textContent = message;
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        function showError(message) {
            const alert = document.getElementById('alertError');
            document.getElementById('errorMessage').textContent = message;
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        function clearAllData() {
            if (!confirm('⚠️ WAARSCHUWING!\n\nDit zal ALLE data verwijderen:\n- Leden\n- Inschrijvingen\n- Resultaten\n- Plaatsentrekkingen\n- Vergunningen\n\nBen je ABSOLUUT ZEKER?')) {
                return;
            }
            if (!confirm('Laatste bevestiging!\n\nDit kan NIET ongedaan gemaakt worden.\n\nDoorgaan?')) {
                return;
            }
            const keysToKeep = ['admin_users', 'admin_token', 'last_login_time'];
            const allKeys = Object.keys(localStorage);
            allKeys.forEach(key => {
                if (!keysToKeep.includes(key)) {
                    localStorage.removeItem(key);
                }
            });
            showSuccess('Alle data succesvol gewist! De pagina wordt herladen...');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 2000);
        }
        window.addEventListener('DOMContentLoaded', () => {
            loadAccountInfo();
        });
    </script>
</body></html>